import{d as R,r as u,c as L,w as V,o as K,b as N,k as l,m as e,l as _,F as k,C as x,t as y,y as I,Q as j,J as M,n as q,x as r}from"./vendor-ok2uK06E.js";import{_ as H}from"./ui-CSeu1pIM.js";const U={class:"story-view",role:"main"},W={class:"particles-container","aria-hidden":"true"},G={key:0,class:"loading-overlay","aria-hidden":"true"},J={class:"story-container"},O={class:"story-controls"},Q=["aria-label","title"],X={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},Y={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},Z={class:"story-info"},ee=["aria-label"],ae=["src","alt"],te={class:"story-content"},ie={class:"story-title",id:"story-title"},se={class:"story-description","aria-describedby":"story-title"},ne={class:"story-gallery",role:"region","aria-label":"Story image gallery"},oe={class:"gallery-content"},le=["disabled"],re={class:"image-gallery"},de=["src","alt"],ce={key:0,class:"image-loading"},ue={class:"story-swiper"},ge={class:"swiper-wrapper"},ve=["onClick","onKeydown","aria-label"],he=["src","alt"],me={class:"story-preview-title"},pe=["disabled"],ye={class:"navigation-dots",role:"tablist","aria-label":"Story navigation"},be=["onClick","aria-label","aria-selected","tabindex"],we={class:"dot-label"},fe={key:0,class:"progress-bar","aria-hidden":"true"},_e=R({__name:"StoryView",setup(ke){const o=u(0),g=u(!1),S=u(!0),p=u(new Set),c=u(!1),h=u(null),n=u([{id:1,title:"Solaris-3",description:"Sol-III, the third planet from the sun. A world of chaos and change, where old conventions are discarded and disasters run rampant. Human civilization struggles to survive in this new era of destruction and rebirth, facing uncharted challenges with unwavering determination.",image:"/images/i-slls-cab62db7.png",thumbnail:"/images/demo1.png",icon:"/images/icon-01.png"},{id:2,title:"Waveworn Phenomenon",description:`The Lament's power causes destructive anomalies, such as the "Tacet Fields", "Tacet Discord Outbreaks", and the mysterious matter named "Tacetite". These are collectively known as the "Waveworn Phenomena"`,image:"/images/i-hy-09f3521f.png",thumbnail:"/images/demo2.png",icon:"/images/icon-02.png"},{id:3,title:"Lament",description:'The term "Lament" refers to the ongoing catastrophic events on Solaris-3. Since the first Lament, destruction has been nonstop and unyielding. The tide of devastation continues without pause, with no signs of slowing down.',image:"/images/i-lament-494f6f60.png",thumbnail:"/images/zhezhi-6698177e.png",icon:"/images/icon-03.png"},{id:4,title:"Tacet Field",description:'The "Tacet Fields" are thought to be where all Tacet Discords originate. These locations feature a sky of inverted seas and a deep cross-shaped Tacet Mark on the ground. Reverberations fill the air, linking our world to an unknown space through a white Resonance Cord. These areas attract gatherings of Tacet Discords.',image:"/images/i-wyq-c9219c4a.png",thumbnail:"/images/changli-3da788f2.png",icon:"/images/icon-04.png"},{id:5,title:"Resonator",description:`Individuals with the ability to resonate with certain objects and manipulate their frequencies are known as "Resonators". These individuals exhibit unique "Resonance Abilities", also known as their "Fortes", through the "Tacet Mark" on their bodies. According to experts, a Resonator's abilities are often influenced by their past experiences and subconscious mind.`,image:"/images/i-gmz-6b5708bb.png",thumbnail:"/images/yinlin-9f681990.png",icon:"/images/icon-05.png"}]),m=L(()=>n.value[o.value]),b=t=>new Promise((a,i)=>{const s=new Image;s.onload=()=>{p.value.add(t),a()},s.onerror=i,s.src=t}),v=async t=>{if(g.value||t===o.value)return;g.value=!0;const a=n.value[t];if(!p.value.has(a.image))try{await b(a.image)}catch{console.warn("Failed to preload image:",a.image)}o.value=t,setTimeout(()=>{g.value=!1},600)},w=()=>{const t=(o.value+1)%n.value.length;v(t)},T=()=>{const t=(o.value-1+n.value.length)%n.value.length;v(t)},$=t=>{switch(t.key){case"ArrowLeft":t.preventDefault(),T();break;case"ArrowRight":t.preventDefault(),w();break;case" ":t.preventDefault(),P();break;case"Escape":t.preventDefault(),f();break}},C=t=>{const a=t.target;console.warn("Failed to load image:",a.src)},z=()=>{h.value||(c.value=!0,h.value=setInterval(()=>{w()},4e3))},f=()=>{h.value&&(clearInterval(h.value),h.value=null),c.value=!1},P=()=>{c.value?f():z()},D=async()=>{const t=n.value.length,a=(o.value-1+t)%t,i=(o.value+1)%t,s=[n.value[a].image,n.value[i].image].filter(d=>!p.value.has(d));if(s.length>0)try{await Promise.all(s.map(d=>b(d)))}catch{console.warn("Failed to preload adjacent images")}};V(o,()=>{D()}),K(async()=>{try{await Promise.all(n.value.slice(0,3).map(t=>b(t.image)))}catch{console.warn("Failed to preload some images")}finally{S.value=!1}window.addEventListener("keydown",$)}),N(()=>{f(),window.removeEventListener("keydown",$)});const F=L(()=>{const t=n.value.length;if(t<=1)return n.value.map((i,s)=>({...i,originalIndex:s}));const a=(o.value+1)%t;return[{...n.value[a],originalIndex:a}]}),A=t=>`side-slide-${t}`,E=t=>{const a=Math.random()*100,i=Math.random()*100,s=Math.random()*4+2,d=Math.random()*20+10,B=Math.random()*5;return{left:`${a}%`,top:`${i}%`,width:`${s}px`,height:`${s}px`,animationDuration:`${d}s`,animationDelay:`${B}s`}};return(t,a)=>(r(),l("div",U,[e("div",W,[(r(),l(k,null,x(15,i=>e("div",{class:"particle",key:`particle-${i}`,style:j(E())},null,4)),64))]),a[10]||(a[10]=e("div",{class:"floating-elements","aria-hidden":"true"},[e("div",{class:"floating-orb orb-1"}),e("div",{class:"floating-orb orb-2"}),e("div",{class:"floating-orb orb-3"})],-1)),S.value?(r(),l("div",G,[...a[0]||(a[0]=[e("div",{class:"loading-spinner"},null,-1),e("p",{class:"loading-text"},"Loading stories...",-1)])])):_("",!0),e("div",J,[e("div",O,[e("button",{class:"control-btn",onClick:P,"aria-label":c.value?"Pause auto-play":"Start auto-play",title:c.value?"Pause auto-play":"Start auto-play"},[c.value?(r(),l("svg",Y,[...a[2]||(a[2]=[e("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)])])):(r(),l("svg",X,[...a[1]||(a[1]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])]))],8,Q),a[3]||(a[3]=e("div",{class:"keyboard-hint","aria-live":"polite"},[e("span",null,"Use ← → arrow keys or spacebar")],-1))]),e("div",Z,[e("div",{class:"story-icon",role:"img","aria-label":`${m.value.title} icon`},[e("img",{src:m.value.icon,alt:`${m.value.title} story icon`,loading:"eager"},null,8,ae)],8,ee),e("div",te,[e("h1",ie,y(m.value.title),1),e("p",se,y(m.value.description),1)])]),e("div",ne,[e("div",oe,[e("button",{class:"carousel-btn prev",onClick:T,disabled:g.value,"aria-label":"Previous story",title:"Previous story (←)"},[...a[4]||(a[4]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})],-1)])],8,le),e("div",re,[e("div",{class:I(["main-image",{transitioning:g.value}])},[e("img",{src:n.value[o.value].image,alt:`${n.value[o.value].title} - Main story image`,loading:"eager",onError:C},null,40,de),p.value.has(n.value[o.value].image)?_("",!0):(r(),l("div",ce,[...a[5]||(a[5]=[e("div",{class:"loading-spinner small"},null,-1)])]))],2),e("div",ue,[e("div",ge,[(r(!0),l(k,null,x(F.value,(i,s)=>(r(),l("div",{key:`side-story-${i.originalIndex}`,class:I(["swiper-slide side-image",A(s)]),onClick:d=>v(i.originalIndex),onKeydown:[M(d=>v(i.originalIndex),["enter"]),M(q(d=>v(i.originalIndex),["prevent"]),["space"])],tabindex:"0",role:"button","aria-label":`View ${i.title} story`},[e("img",{src:i.image,alt:`${i.title} preview`,loading:"lazy",onError:C},null,40,he),a[6]||(a[6]=e("div",{class:"overlay"},null,-1)),e("div",me,y(i.title),1)],42,ve))),128))])])]),e("button",{class:"carousel-btn next",onClick:w,disabled:g.value,"aria-label":"Next story",title:"Next story (→)"},[...a[7]||(a[7]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})],-1)])],8,pe)]),e("div",ye,[(r(!0),l(k,null,x(n.value,(i,s)=>(r(),l("button",{key:`dot-${i.id}`,class:I(["nav-dot",{active:s===o.value}]),onClick:d=>v(s),"aria-label":`Go to ${i.title}`,"aria-selected":s===o.value,role:"tab",tabindex:s===o.value?0:-1},[a[8]||(a[8]=e("span",{class:"dot-indicator"},null,-1)),e("span",we,y(i.title),1)],10,be))),128))])]),c.value?(r(),l("div",fe,[...a[9]||(a[9]=[e("div",{class:"progress-fill"},null,-1)])])):_("",!0)])]))}}),Se=H(_e,[["__scopeId","data-v-d71b9676"]]);export{Se as default};
